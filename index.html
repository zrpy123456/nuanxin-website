






<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªç„¶æ‹¼è¯»æ•™å­¦ç³»ç»Ÿ - èƒŒå•è¯æ–¹æ³•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            display: grid;
            grid-template-columns: 250px 1fr;
        }
        
        header {
            background: #4a6cf7;
            color: white;
            padding: 20px;
            text-align: center;
            grid-column: 1 / -1;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .sidebar {
            background: #f0f4ff;
            padding: 20px;
            height: calc(100vh - 200px);
            overflow-y: auto;
            position: sticky;
            top: 0;
        }
        
        .search-box {
            margin-bottom: 20px;
        }
        
        .search-box input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .category-title {
            font-weight: bold;
            margin: 15px 0 10px;
            color: #4a6cf7;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
        }
        
        .pattern-list {
            list-style: none;
        }
        
        .pattern-item {
            padding: 8px 10px;
            margin: 5px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .pattern-item:hover {
            background: #d9e2ff;
        }
        
        .pattern-item.active {
            background: #4a6cf7;
            color: white;
        }
        
        .content {
            padding: 25px;
            height: calc(100vh - 200px);
            overflow-y: auto;
        }
        
        .pattern-header {
            background: #5b7cfd;
            color: white;
            padding: 15px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .pattern {
            font-size: 2.5rem;
            font-weight: bold;
            letter-spacing: 2px;
            margin-bottom: 5px;
        }
        
        .sound {
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .sound-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.4rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .sound-btn:hover {
            transform: scale(1.2);
        }
        
        .rule {
            color: #666;
            font-style: italic;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
            text-align: center;
        }
        
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .example {
            padding: 15px;
            background: #f9fafc;
            border-radius: 8px;
            transition: background 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .example:hover {
            background: #edf2ff;
        }
        
        .word {
            font-size: 1.3rem;
            font-weight: 600;
            color: #4a6cf7;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .play-btn {
            background: none;
            border: none;
            color: #6e8efb;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        .meaning {
            font-size: 0.9rem;
            color: #666;
        }
        
        .practice-section {
            margin-top: 40px;
            padding: 25px;
            background: #f0f4ff;
            border-radius: 12px;
        }
        
        .practice-title {
            font-size: 1.5rem;
            color: #4a6cf7;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .practice-word {
            font-size: 2.5rem;
            font-weight: bold;
            color: #333;
            margin: 20px 0;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        /* æ–°å¢æ‹¼å†™ç»ƒä¹ æ ·å¼ */
        .spelling-input-container {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        
        .spelling-input {
            padding: 12px 15px;
            font-size: 1.2rem;
            border: 2px solid #4a6cf7;
            border-radius: 8px;
            width: 250px;
            text-align: center;
        }
        
        .spelling-submit {
            padding: 12px 20px;
            background: #4a6cf7;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
        }
        
        .feedback {
            margin-top: 15px;
            font-size: 1.2rem;
            min-height: 30px;
            text-align: center;
        }
        
        .correct {
            color: #28a745;
            font-weight: bold;
        }
        
        .incorrect {
            color: #dc3545;
            font-weight: bold;
        }
        
        .correct-word {
            font-style: italic;
            margin-top: 5px;
        }
        
        .practice-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            background: #4a6cf7;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background: #3a5cd8;
            transform: translateY(-2px);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid #4a6cf7;
            color: #4a6cf7;
        }
        
        .btn-outline:hover {
            background: #4a6cf7;
            color: white;
        }
        
        /* ç»Ÿä¸€ä½¿ç”¨çº¢è‰²é«˜äº® */
        .highlight {
            color: #ff6b6b;
            font-weight: bold;
        }
        
        /* ä¿®å¤å­—æ¯é—´è·é—®é¢˜ */
        .word-container {
            display: inline-flex;
            position: relative;
            letter-spacing: normal;
            word-spacing: normal;
        }
        
        /* æ•™é­æ ·å¼ */
        #teaching-pointer {
            position: absolute;
            width: 30px;
            height: 40px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 40"><path d="M15 0 L30 40 L15 30 L0 40 Z" fill="%23ff6b6b"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s, transform 0.5s;
        }
        
        /* å­—æ¯æ ·å¼ */
        .letter {
            display: inline-block;
            position: relative;
            transition: all 0.3s;
        }
        
        /* å½“æ•™é­æŒ‡å‘æ—¶çš„å­—æ¯æ ·å¼ */
        .letter.pointing {
            transform: scale(1.2);
            color: #ff6b6b;
            z-index: 100;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            margin-top: 30px;
            grid-column: 1 / -1;
        }
        
        /* æ¸¸æˆæŒ‰é’®æ ·å¼ */
        .game-btn {
            margin-top: 10px;
        }
        
        .match-card.matched {
            background: #28a745 !important;
            cursor: default;
        }
        
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                height: auto;
                position: static;
            }
            
            .examples-grid {
                grid-template-columns: 1fr;
            }
            
            .practice-buttons {
                flex-direction: column;
            }
            
            .spelling-input-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .spelling-input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- æ•™é­å…ƒç´  -->
        <div id="teaching-pointer"></div>
        
        <header>
            <h1>è‡ªç„¶æ‹¼è¯»æ•™å­¦ç³»ç»Ÿ - å¸¦æ•™é­åŠŸèƒ½</h1>
            <p class="subtitle">æŒæ¡å­—æ¯ç»„åˆå‘éŸ³è§„å¾‹ï¼Œè½»æ¾è®°å¿†å•è¯</p>
        </header>
        
        <div class="sidebar">
            <div class="search-box">
                <input type="text" id="search-input" placeholder="æœç´¢å­—æ¯ç»„åˆ...">
            </div>
            
            <div class="category-title">å…ƒéŸ³ç»„åˆ</div>
            <ul class="pattern-list" id="vowel-patterns">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </ul>
            
            <div class="category-title">è¾…éŸ³ç»„åˆ</div>
            <ul class="pattern-list" id="consonant-patterns">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </ul>
            
            <div class="category-title">ç‰¹æ®Šç»„åˆ</div>
            <ul class="pattern-list" id="special-patterns">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </ul>
        </div>
        
        <div class="content">
            <div class="pattern-header">
                <div class="pattern" id="current-pattern">ai</div>
                <div class="sound">
                    å‘éŸ³: <span id="current-sound">/eÉª/</span>
                    <button class="sound-btn" id="pattern-sound-btn">ğŸ”Š</button>
                </div>
            </div>
            
            <p class="rule" id="current-rule">è§„åˆ™ï¼šé€šå¸¸åœ¨å•è¯ä¸­é—´å‡ºç°ï¼Œå‘é•¿éŸ³A</p>
            
            <div class="examples-grid" id="examples-container">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="practice-section">
                <h2 class="practice-title">æ‹¼è¯»ç»ƒä¹ </h2>
                <div class="practice-word" id="practice-word">ç‚¹å‡»"å¼€å§‹ç»ƒä¹ "æŒ‰é’®å¼€å§‹</div>
                
                <!-- æ–°å¢æ‹¼å†™è¾“å…¥åŒºåŸŸ -->
                <div class="spelling-input-container" id="spelling-input-container" style="display: none;">
                    <input type="text" class="spelling-input" id="spelling-input" placeholder="è¯·è¾“å…¥å•è¯">
                    <button class="spelling-submit" id="spelling-submit">æäº¤</button>
                </div>
                
                <div class="feedback" id="feedback"></div>

                <div class="practice-buttons">
                    <button class="btn" id="start-practice">å¼€å§‹ç»ƒä¹ </button>
                    <button class="btn btn-outline" id="show-word">æ˜¾ç¤ºå•è¯</button>
                    <button class="btn btn-outline" id="next-word">ä¸‹ä¸€ä¸ª</button>
                    <button class="btn" id="play-word">ğŸ”Š å‘éŸ³</button>
                    <!-- æ¸¸æˆæŒ‰é’®å°†åœ¨è¿™é‡ŒåŠ¨æ€æ·»åŠ  -->
                </div>
            </div>
        </div>
        
        <footer>
            <p>è‡ªç„¶æ‹¼è¯»æ•™å­¦ç³»ç»Ÿ &copy; 2025 | ä¸“ä¸ºè‹±è¯­å­¦ä¹ è€…è®¾è®¡</p>
        </footer>
    </div>

    <script>
        // æ‰€æœ‰å­—æ¯ç»„åˆæ•°æ®
        const allPatterns = {
            // å…ƒéŸ³ç»„åˆ
            "ai": {
                sound: "/eÉª/",
                rule: "è§„åˆ™ï¼šé€šå¸¸åœ¨å•è¯ä¸­é—´å‡ºç°ï¼Œå‘é•¿éŸ³A",
                words: [
                    {word: "tail", meaning: "n.å°¾å·´; [pl.]ç‡•å°¾æœ"},
                    {word: "jail", meaning: "n./v.ç›‘ç‹±; ç›‘ç¦"},
                    {word: "rail", meaning: "n.é“è½¨; è½¨é“; é“è·¯"},
                    {word: "nail", meaning: "n.æŒ‡ç”²; é’‰å­ vt.é’‰ä½"},
                    {word: "rain", meaning: "n.é›¨ï¼Œé›¨æ°´ vi.ä¸‹é›¨"},
                    {word: "maid", meaning: "n.å¥³ä»†; å°‘å¥³ï¼Œå¤„å¥³"},
                    {word: "pain", meaning: "n.ç–¼ç—›ï¼Œæ‚²ç—› v.ä½œç—›"},
                    {word: "paint", meaning: "vt.ç”»ç”»ï¼Œ(ç”¨æ²¹æ¼†)ä¿®é¥° n.æ¶‚æ–™"}
                ]
            },
            "ay": {
                sound: "/eÉª/",
                rule: "è§„åˆ™ï¼šé€šå¸¸åœ¨å•è¯æœ«å°¾å‡ºç°ï¼Œå‘é•¿éŸ³A",
                words: [
                    {word: "bay", meaning: "n.æ¹¾,æœˆæ¡‚æ ‘[pl.]æ¡‚å† "},
                    {word: "lay", meaning: "vt.æ”¾;å®‰æ’;é“ºè®¾;è¦†ç›–"},
                    {word: "say", meaning: "vt.è¯´;è¯´æ˜;æ¯”å¦‚è¯´"},
                    {word: "way", meaning: "n.é“è·¯;æ–¹å¼;æ–¹æ³•"},
                    {word: "hay", meaning: "n.å¹²è‰; é¥²æ–™"},
                    {word: "pay", meaning: "vt.vi.ä»˜æ¬¾;ç»™â€¦æŠ¥é…¬"},
                    {word: "may", meaning: "v.aux.å¯èƒ½;å¯ä»¥ï¼Œç¥"},
                    {word: "ray", meaning: "n.å…‰çº¿ï¼Œå°„çº¿ï¼Œè¾å°„çº¿"}
                ]
            },
            "ee": {
                sound: "/iË/",
                rule: "è§„åˆ™ï¼šé€šå¸¸åœ¨å•è¯ä¸­é—´å‡ºç°ï¼Œå‘é•¿éŸ³E",
                words: [
                    {word: "feet", meaning: "n.foot è„šçš„å¤æ•°"},
                    {word: "jeep", meaning: "n.å‰æ™®è½¦; å°å‹è¶Šé‡è½¦"},
                    {word: "bee", meaning: "n.èœ‚ï¼Œå¯†èœ‚;å¿™ç¢Œçš„äºº"},
                    {word: "eel", meaning: "n.é³é±¼"},
                    {word: "peel", meaning: "vt.å‰¥(çš®)ï¼Œå‰Š(çš®)"},
                    {word: "reed", meaning: "n.èŠ¦è‹‡ï¼ŒèŠ¦æ†ï¼ŒèŠ¦ä¸›"},
                    {word: "see", meaning: "vt.çœ‹è§;é‡è§;çœ‹å‡º"},
                    {word: "teeth", meaning: "tooth ç‰™(å¤æ•°)"}
                ]
            },
            "ea": {
                sound: "/iË/",
                rule: "è§„åˆ™ï¼šé€šå¸¸åœ¨å•è¯ä¸­é—´å‡ºç°ï¼Œå‘é•¿éŸ³E",
                words: [
                    {word: "sea", meaning: "n.æµ·ï¼Œæµ·æ´‹ï¼Œæµ·é¢"},
                    {word: "pea", meaning: "n.è±Œè±†;è±Œè±†å±æ¤ç‰©"},
                    {word: "tea", meaning: "n.èŒ¶æ ‘; èŒ¶å¶; èŒ¶ç‚¹"},
                    {word: "peach", meaning: "n.æ¡ƒå­ï¼Œæ¡ƒæ ‘"},
                    {word: "leaf", meaning: "n.æ ‘å¶ï¼Œ(ä¹¦åˆŠçš„)ä¸€å¼ (ä¸¤é¢)"},
                    {word: "read", meaning: "vt.è¯»ï¼Œçœ‹æ‡‚ï¼Œè¾©è®¤;è§‰å¯Ÿ"},
                    {word: "meat", meaning: "n.(çŒªã€ç‰›ã€ç¾Šç­‰çš„)è‚‰"},
                    {word: "eat", meaning: "v. åƒ(é¥­); ç”¨é¤;"}
                ]
            },
                        "ey": {
                sound: "/eÉª/ æˆ– /iË/",
                rule: "è§„åˆ™ï¼šé€šå¸¸åœ¨å•è¯æœ«å°¾å‡ºç°ï¼Œå¯å‘/eÉª/æˆ–/iË/éŸ³",
                words: [
                    {word: "key", meaning: "n.é’¥åŒ™;å…³é”® a.åŸºæœ¬çš„"},
                    {word: "honey", meaning: "n.èœ‚èœœ"},
                    {word: "money", meaning: "n.è´§å¸ï¼›é‡‘é’±ï¼Œè´¢å¯Œ"},
                    {word: "monkey", meaning: "n.çŒ´å­ v.ä¹±å¼„; èƒ¡é—¹"},
                    {word: "donkey", meaning: "n.é©´å­;è ¢äºº;é¡½å›ºçš„äºº"},
                    {word: "turkey", meaning: "n.ç«é¸¡ï¼›ç«é¸¡è‚‰"},
                    {word: "jockey", meaning: "n éª‘æ‰‹"},
                    {word: "hockey", meaning: "n.æ›²æ£çƒ"}
                ]
            },
            "ie": {
                sound: "/aÉª/",
                rule: "è§„åˆ™ï¼šé€šå¸¸åœ¨å•è¯ä¸­é—´æˆ–æœ«å°¾å‡ºç°ï¼Œå‘é•¿éŸ³I",
                words: [
                    {word: "tie", meaning: "n.ç³»å¸¦ï¼›(å¼•æŠ»ä¸º)è”ç³»"},
                    {word: "pie", meaning: "n.æ´¾ï¼Œæœ‰æœå­é¦…çš„è›‹ç³•"},
                    {word: "lie", meaning: "vi.è¯´è°ï¼Œæ¬ºéª— n.è°è¯"},
                    {word: "die", meaning: "vi.æ­»äº¡; æ¯æ­»; ç†„ç­"},
                    {word: "pied", meaning: "adj.æ‚è‰²çš„ï¼›æ–‘é©³çš„"},
                    {word: "hie", meaning: "vi&vi å¿«èµ°"},
                    {word: "vie", meaning: "vi.ç«äº‰ vt. ä½¿ç«äº‰ã€åšè¾ƒé‡"},
                    {word: "fried", meaning: "a.æ²¹ç…çš„, æ²¹ç‚¸çš„"}
                ]
            },
            "igh": {
                sound: "/aÉª/",
                rule: "è§„åˆ™ï¼šé€šå¸¸åœ¨å•è¯ä¸­é—´å‡ºç°ï¼Œå‘é•¿éŸ³I",
                words: [
                    {word: "light", meaning: "n,ç¯ vt.ç‚¹ç‡ƒï¼›ç…§äº®vi.ç‚¹ç€"},
                    {word: "fight", meaning: "v.æ‰“ä»—ï¼Œæˆ˜æ–—ï¼Œä½œæ–—äº‰"},
                    {word: "sight", meaning: "n.æƒ…æ™¯ï¼Œåèƒœï¼Œé£æ™¯"},
                    {word: "right", meaning: "n.å³;å³è¾¹ adj.å³è¾¹çš„"},
                    {word: "night", meaning: "n.å¤œæ™šï¼Œå¤œé—´ï¼Œé»‘å¤œ"},
                    {word: "might", meaning: "v.aux.å¯èƒ½ï¼Œä¼šï¼Œä¹Ÿè®¸"},
                    {word: "sigh", meaning: "n.&vi.å¹æ°”ï¼Œå¹æ¯"},
                    {word: "high", meaning: "a.é«˜çš„ï¼›é«˜çº§çš„ ad.é«˜"}
                ]
            },
            "oa": {
                sound: "/oÊŠ/",
                rule: "è§„åˆ™ï¼šé€šå¸¸åœ¨å•è¯ä¸­é—´å‡ºç°ï¼Œå‘é•¿éŸ³O",
                words: [
                    {word: "boat", meaning: "n.å°èˆ¹ï¼›è‰‡ï¼›å°è½®èˆ¹"},
                    {word: "toad", meaning: "n.èŸ¾èœï¼Œç™è›¤èŸ†"},
                    {word: "toast", meaning: "vt./n.ç¥é…’n.åä¸v.çƒ˜"},
                    {word: "road", meaning: "n.é“è·¯ï¼Œå…¬è·¯ï¼›é€”å¾„"},
                    {word: "goat", meaning: "n.å±±ç¾Š"},
                    {word: "soap", meaning: "n.è‚¥çš‚(ä¸å¯æ•°åè¯)"},
                    {word: "coal", meaning: "n.ç…¤ï¼Œç…¤å—"},
                    {word: "coat", meaning: "n.å¤–è¡£ï¼Œä¸€å±‚ï¼Œä¸€é“(æ²¹æ¼†ç­‰)"}
                ]
            },
            "ow1": {
                sound: "/oÊŠ/",
                rule: "è§„åˆ™ï¼šowçš„ç¬¬ä¸€ç§å‘éŸ³ï¼Œå‘é•¿éŸ³O",
                words: [
                    {word: "row", meaning: "vt.åˆ’(èˆ¹ç­‰) vi.åˆ’èˆ¹"},
                    {word: "low", meaning: "adj.ä½çš„ï¼›æµ…çš„ï¼›çŸ®çš„"},
                    {word: "bowl", meaning: "n.ç¢—ï¼Œé’µ;ç¢—çŠ¶ç‰©"},
                    {word: "yellow", meaning: "a.é»„(è‰²)çš„ n.é»„(è‰²)"},
                    {word: "pillow", meaning: "n.æ•å¤´ v.æ•, æ, å«"},
                    {word: "hollow", meaning: "adj.ç©ºæ—·ï¼Œç©ºè™šçš„ï¼›æ— æ„ä¹‰çš„"},
                    {word: "window", meaning: "n.çª—å­ï¼Œçª—æˆ·ï¼Œçª—å£"},
                    {word: "rainbow", meaning: "n.è™¹ï¼›å½©è™¹"}
                ]
            },
            "ui-ue": {
                sound: "/uË/ æˆ– /juË/",
                rule: "è§„åˆ™ï¼šuiå’Œueç»„åˆï¼Œå‘é•¿éŸ³Uæˆ–JU",
                words: [
                    {word: "suit", meaning: "n.å¥—è£…ï¼Œèµ·æ‹†ï¼Œè¯‰è®¼ vt.é€‚åˆ"},
                    {word: "juice", meaning: "n.æœæ±; ç²¾é«“; ç²¾åŠ›"},
                    {word: "juicy", meaning: "adj. å¤šæ±çš„; æœ‰è¶£çš„"},
                    {word: "fruit", meaning: "n.æ°´æœ;æœå® v.ç»“æœå®"},
                    {word: "sue", meaning: "vt.& vi.æ§å‘Šï¼Œæ§è¯‰"},
                    {word: "blue", meaning: "a.è“çš„;é˜´éƒçš„ n.è“è‰²"},
                    {word: "clue", meaning: "n.çº¿ç´¢ï¼Œæš—ç¤ºï¼Œæç¤º"},
                    {word: "glue", meaning: "n.èƒ¶æ°´ï¼Œèƒ¶ v.ç”¨èƒ¶ç²˜"}
                ]
            },
            "y1": {
                sound: "/aÉª/",
                rule: "è§„åˆ™ï¼šé€šå¸¸åœ¨å•è¯æœ«å°¾å‡ºç°ï¼Œå‘é•¿éŸ³I",
                words: [
                    {word: "sky", meaning: "n.å¤©ç©º;[pl]å¤©è‰²;æ°”å€™"},
                    {word: "fly", meaning: "vt.æ”¾(é£ç­,é£æœºæ¨¡å‹)"},
                    {word: "cry", meaning: "v./n.å«(å–); å“­; å–Š"},
                    {word: "shy", meaning: "a.æ˜“å—æƒŠçš„ï¼›å®³ç¾çš„"},
                    {word: "my", meaning: "pron.æˆ‘çš„"},
                    {word: "spy", meaning: "n.é—´è°ï¼Œç‰¹åŠ¡ vt.ä¾¦å¯Ÿ"},
                    {word: "dry", meaning: "a.å¹²çš„;æ¯ç‡¥çš„ v.ä½¿å¹²"},
                    {word: "type", meaning: "n.ç±»å‹ï¼Œå…¸å‹ v.æ‰“å­—"}
                ]
            },
            "y2": {
                sound: "/i/",
                rule: "è§„åˆ™ï¼šé€šå¸¸åœ¨å•è¯ä¸­é—´æˆ–æœ«å°¾å‡ºç°ï¼Œå‘çŸ­éŸ³I",
                words: [
                    {word: "rainy", meaning: "adj.ä¸‹é›¨çš„ï¼›å¤šé›¨çš„"},
                    {word: "sunny", meaning: "a.é˜³å…‰å……è¶³çš„ï¼›å¿«æ´»çš„"},
                    {word: "puppy", meaning: "n.å°ç‹—ï¼›å¹¼å°çš„åŠ¨ç‰©"},
                    {word: "dizzy", meaning: "a.å¤´æ™•çœ¼èŠ±çš„ï¼Œçœ©æ™•çš„"},
                    {word: "dirty", meaning: "a.ä¸å¹²å‡€çš„ vt.å¼„è„"},
                    {word: "happy", meaning: "adj.å¹¸ç¦çš„ï¼›å¿«ä¹çš„"},
                    {word: "baby", meaning: "nå°å®å®ï¼Œ.ä¸€å®¶ä¸­å¹´é¾„æœ€å°çš„äºº"},
                    {word: "pony", meaning: "n.çŸ®ç§é©¬ a.å°å‹çš„"}
                ]
            },
            "or": {
                sound: "/É”Ër/",
                rule: "è§„åˆ™ï¼šorç»„åˆï¼Œå‘/É”Ër/éŸ³",
                words: [
                    {word: "porch", meaning: "n.(ä¸Šæœ‰é¡¶æ£šçš„)é—¨å»Š"},
                    {word: "horse", meaning: "n.é©¬; [ä½“è‚²]æœ¨é©¬"},
                    {word: "fort", meaning: "n.è¦å¡; å ¡å’; ç¢‰å ¡"},
                    {word: "fork", meaning: "n.é¤å‰ v.å‰; åˆ†å²”"},
                    {word: "pork", meaning: "n.çŒªè‚‰"},
                    {word: "horn", meaning: "n.å·è§’ï¼›è­¦æŠ¥å™¨ï¼›è§’"},
                    {word: "corn", meaning: "n.ç‰ç±³ï¼Œè°·ç‰©ï¼›(è‹±)å°éº¦"},
                    {word: "morning", meaning: "n.æ—©æ™¨ï¼›ä¸Šåˆ"}
                ]
            },
            "ar": {
                sound: "/É‘Ër/",
                rule: "è§„åˆ™ï¼šarç»„åˆï¼Œå‘/É‘Ër/éŸ³",
                words: [
                    {word: "car", meaning: "n.æ±½è½¦ï¼Œå°æ±½è½¦ï¼Œè½¿è½¦"},
                    {word: "cart", meaning: "n.æ‰‹æ¨è½¦ v.ç”¨è½¦è¿é€"},
                    {word: "card", meaning: "n.å¡ç‰‡; è¯·å¸–; å…¥åœºåˆ¸"},
                    {word: "park", meaning: "n.å…¬å›­ v.åœæ”¾(è½¦è¾†)"},
                    {word: "farm", meaning: "n.å†œåœºï¼Œå†œåº„ï¼›é¥²å…»åœº"},
                    {word: "arm", meaning: "n.æ‰‹è‡‚ï¼Œæ‰¶æ‰‹ v.æ­¦è£…"},
                    {word: "farmer", meaning: "n.å†œæ°‘ï¼›å†œåœºä¸»"},
                    {word: "garden", meaning: "n.èŠ±å›­, æœå›­ vt.ç§èŠ±"}
                ]
            },
            "ur": {
                sound: "/ÉœËr/",
                rule: "è§„åˆ™ï¼šurç»„åˆï¼Œå‘/ÉœËr/éŸ³",
                words: [
                    {word: "fur", meaning: "n.(å…½ç±»çš„)è½¯æ¯›ï¼›çš®æ¯›"},
                    {word: "hurt", meaning: "v.ä½¿å—ä¼¤ï¼Œä½¿ç—›ï¼Œä¼¤å®³"},
                    {word: "purse", meaning: "n.é’±åŒ…ï¼Œå°é’±è¢‹ï¼Œæ‰‹è¢‹"},
                    {word: "nurse", meaning: "n.ä¿å§†ï¼›æŠ¤å£« vt.çœ‹æŠ¤"},
                    {word: "burn", meaning: "v.ç‡ƒçƒ§; çƒ§æ¯;n. çƒ§ä¼¤ï¼Œçƒ«ä¼¤"},
                    {word: "burst", meaning: "v çˆ†ç‚¸ n çˆ†è£‚"},
                    {word: "curb", meaning: "v.æ§åˆ¶ï¼ŒæŠ‘åˆ¶; çº¦æŸï¼Œé™å®šn.èµ·æ§åˆ¶ï¼ˆæˆ–é™åˆ¶ï¼‰ä½œç”¨çš„äº‹æƒ…"},
                    {word: "lurk", meaning: "vi.æ½œä¼ï¼ŒåŸ‹ä¼; æ½œè—ï¼Œ n.æ½œåœ¨ï¼Œæ½œä¼; æ¬ºè¯ˆ"}
                ]
            },
           "er": {
                sound: "/É™r/",
                rule: "è§„åˆ™ï¼šerç»„åˆï¼Œå‘/É™r/éŸ³",
                words: [
                    {word: "sister", meaning: "n.å§; å¦¹; [è‹±]æŠ¤å£«"},
                    {word: "brother", meaning: "n.å…„å¼Ÿï¼›åŒäº‹ï¼ŒåŒèƒ"},
                    {word: "father", meaning: "n.çˆ¶äº²ï¼›ç¥çˆ¶ï¼›åˆ›å§‹äºº"},
                    {word: "mother", meaning: "n.æ¯äº²; æ ¹æº vt.äº§ç”Ÿ"},
                    {word: "winter", meaning: "n.å†¬å¤©ï¼›å†¬å­£"},
                    {word: "rooster", meaning: "n.å…¬é¸¡ï¼›ç‹‚å¦„è‡ªè´Ÿçš„äºº"},
                    {word: "mermaid", meaning: " n.ç¾äººé±¼"},
                    {word: "marker", meaning: "n.è®°å·ï¼Œæ ‡è®°ï¼Œæ ‡å¿—"}
                ]
            },           
           "ir": {
                sound: "/É™r/",
                rule: "è§„åˆ™ï¼širç»„åˆï¼Œå‘/É™r/éŸ³",
                words: [
                    {word: "bird", meaning: "n.é¸Ÿï¼Œç¦½ç±»"},
                    {word: "dirt", meaning: "n.å°˜ï¼ŒåœŸï¼›æ±¡ç‰©ï¼Œæ±¡å¢"},
                    {word: "dirty", meaning: "a.ä¸å¹²å‡€çš„ vt.å¼„è„"},
                    {word: "first", meaning: "adj.ç¬¬ä¸€çš„ adv.é¦–å…ˆ"},
                    {word: "girl", meaning: "n.å¥³å­©å­ï¼Œå§‘å¨˜ï¼›å¥³å„¿"},
                    {word: "birthday", meaning: "n.ç”Ÿæ—¥ï¼Œè¯ç”Ÿçš„æ—¥æœŸ"},
                    {word: "circus", meaning: "n.é©¬æˆ(å›¢); åœ†å½¢å¹¿åœº"},
                    {word: "circle", meaning: "n.åœ†ï¼Œåœˆï¼Œå¾ªç¯ï¼Œå‘¨æœŸ"}
                ]
            }  
        };

        // ä¸ºç»ƒä¹ åŠŸèƒ½å‡†å¤‡çš„å•è¯åˆ—è¡¨
        const allWords = {};
        Object.keys(allPatterns).forEach(pattern => {
            allWords[pattern] = allPatterns[pattern].words.map(item => item.word);
        });

       // ç»„åˆåˆ†ç±»
      const patternCategories = {
           "vowel": ["ai", "ay", "ee", "ea", "ey", "ie", "igh", "oa", "ow1", "ui-ue", "y1", "y2","or", "ar", "ur","er","ir", "ou","ow2", "oi", "oy", "au", "aw", "oo1", "oo2","ea2"],
           "consonant": ["ch1", "ch2", "sh", "ph", "wh1", "wh2", "ther", "th", "all", "kn", "wr", "mb", "ew", "ge", "bl", "fl", "pl", "cl", "gl", "cr", "gr", "pr", "br", "fr", "tr", "dr", "sm", "sn", "sl", "sp", "st", "sc", "sk", "str"],
           "special": ["a", "e", "i", "o", "u","a-e", "e-e", "i-e", "o-e", "u-e"]
      };

        // === ç»ƒä¹ åŠŸèƒ½å…¨å±€å˜é‡ ===
        let currentPattern;
        let practiceWords;
        let originalOrderWords; // ä¿å­˜åŸå§‹é¡ºåºçš„å•è¯
        let currentPracticeIndex;
        let isSpellingMode;
        let isSecondRound = false; // æ ‡è®°æ˜¯å¦æ˜¯ç¬¬äºŒè½®ï¼ˆä¹±åºï¼‰ç»ƒä¹ 

        // è¾…åŠ©å‡½æ•°ï¼šæ‰“ä¹±æ•°ç»„
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // å°çŒªåƒè‹¹æœæ¸¸æˆ
        function startPigEatAppleGame() {
            const words = [...allWords[currentPattern]];
            if (words.length === 0) {
                alert("æ­¤ç»„åˆæš‚æ— å•è¯å¯æ¸¸æˆ");
                return;
            }
            
            // åˆ›å»ºæ¸¸æˆç•Œé¢
            const gameHTML = `
                <div id="pig-game-container" style="text-align: center; padding: 20px;">
                    <h2>å°çŒªåƒè‹¹æœæ¸¸æˆ ğŸ·ğŸ</h2>
                    <p>è§„åˆ™: æ¯ä¸ªå•è¯ä¼šç¼ºå°‘ä¸€ä¸ªå­—æ¯ï¼Œå¡«å¯¹å­—æ¯å°±ä¸‹ä¸€ä¸ªå•è¯ï¼Œå¦‚æœå¡«é”™å°çŒªå°±æ‰è¿›æ‚¬å´–ï¼Œæ¸¸æˆé‡æ–°å¼€å§‹!</p>
                    <div id="game-word" style="font-size: 2.5rem; font-weight: bold; margin: 20px 0; letter-spacing: 3px;"></div>
                    <div id="game-input-container" style="margin: 20px 0;">
                        <input type="text" id="game-letter-input" maxlength="1" style="font-size: 1.5rem; width: 50px; text-align: center; padding: 10px;">
                        <button id="game-submit" style="padding: 10px 20px; margin-left: 10px;">æäº¤</button>
                    </div>
                    <div id="game-feedback" style="min-height: 40px; font-size: 1.2rem;"></div>
                    <div id="game-progress" style="margin-top: 20px;"></div>
                    <button id="close-game" style="margin-top: 20px; padding: 10px 20px;">è¿”å›</button>
                </div>
            `;
            
            // éšè—ç»ƒä¹ åŒºåŸŸï¼Œæ˜¾ç¤ºæ¸¸æˆåŒºåŸŸ
            document.querySelector('.practice-section').style.display = 'none';
            document.getElementById('examples-container').insertAdjacentHTML('afterend', gameHTML);
            
            // æ¸¸æˆå˜é‡
            let gameWords = [...words];
            let currentGameIndex = 0;
            let hiddenPosition = 0;
            
            // æ‰“ä¹±å•è¯é¡ºåº
            shuffleArray(gameWords);
            
            // åˆå§‹åŒ–æ¸¸æˆ
            setupGameWord();
            
            // æäº¤ç­”æ¡ˆäº‹ä»¶
            document.getElementById('game-submit').addEventListener('click', checkGameAnswer);
            document.getElementById('game-letter-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkGameAnswer();
                }
            });
            
            // å…³é—­æ¸¸æˆäº‹ä»¶
            document.getElementById('close-game').addEventListener('click', function() {
                document.getElementById('pig-game-container').remove();
                document.querySelector('.practice-section').style.display = 'block';
            });
            
            // è®¾ç½®æ¸¸æˆå•è¯
            function setupGameWord() {
                const word = gameWords[currentGameIndex];
                hiddenPosition = Math.floor(Math.random() * word.length);
                const hiddenLetter = word[hiddenPosition];
                
                let displayWord = '';
                for (let i = 0; i < word.length; i++) {
                    if (i === hiddenPosition) {
                        displayWord += '_';
                    } else {
                        displayWord += word[i];
                    }
                }
                
                document.getElementById('game-word').textContent = displayWord;
                document.getElementById('game-word').dataset.fullWord = word;
                document.getElementById('game-word').dataset.hiddenLetter = hiddenLetter;
                document.getElementById('game-letter-input').value = '';
                document.getElementById('game-feedback').innerHTML = '';
                document.getElementById('game-progress').innerHTML = `è¿›åº¦: ${currentGameIndex + 1}/${gameWords.length}`;
                
                // è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†
                document.getElementById('game-letter-input').focus();
            }
            
            // æ£€æŸ¥æ¸¸æˆç­”æ¡ˆ
            function checkGameAnswer() {
                const userInput = document.getElementById('game-letter-input').value.toLowerCase();
                const correctLetter = document.getElementById('game-word').dataset.hiddenLetter.toLowerCase();
                const fullWord = document.getElementById('game-word').dataset.fullWord;
                
                if (userInput === correctLetter) {
                    // ç­”å¯¹äº†
                    document.getElementById('game-feedback').innerHTML = `<span style="color: green;">æ­£ç¡®! "${fullWord}" å°çŒªåƒåˆ°äº†è‹¹æœ! ğŸ</span>`;
                    
                    // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯
                    currentGameIndex++;
                    
                    if (currentGameIndex >= gameWords.length) {
                        // æ¸¸æˆé€šå…³
                        setTimeout(() => {
                            document.getElementById('game-feedback').innerHTML = `<span style="color: green; font-weight: bold;">æ­å–œ! ä½ å¸®åŠ©å°çŒªåƒå®Œäº†æ‰€æœ‰è‹¹æœ! ğŸ‰</span>`;
                            document.getElementById('game-word').textContent = "æ¸¸æˆå®Œæˆ!";
                            document.getElementById('game-input-container').style.display = 'none';
                        }, 1000);
                    } else {
                        // å‡†å¤‡ä¸‹ä¸€ä¸ªå•è¯
                        setTimeout(setupGameWord, 1000);
                    }
                } else {
                    // ç­”é”™äº†
                    document.getElementById('game-feedback').innerHTML = `<span style="color: red;">é”™è¯¯! æ­£ç¡®ç­”æ¡ˆæ˜¯ "${correctLetter}"</span>`;
                    document.getElementById('game-feedback').innerHTML += `<div>å°çŒªæ‰ä¸‹æ‚¬å´–äº†! ğŸ˜± æ¸¸æˆé‡æ–°å¼€å§‹!</div>`;
                    
                    // æ¸¸æˆé‡æ–°å¼€å§‹
                    setTimeout(() => {
                        shuffleArray(gameWords);
                        currentGameIndex = 0;
                        setupGameWord();
                    }, 2000);
                }
            }
        }

        // å•è¯æ‹¼å›¾æ¸¸æˆ
        function startWordPuzzleGame() {
            const words = [...allWords[currentPattern]];
            if (words.length === 0) {
                alert("æ­¤ç»„åˆæš‚æ— å•è¯å¯æ¸¸æˆ");
                return;
            }
            
            // åˆ›å»ºæ¸¸æˆç•Œé¢
            const gameHTML = `
                <div id="puzzle-game-container" style="text-align: center; padding: 20px;">
                    <h2>å•è¯æ‹¼å›¾æ¸¸æˆ ğŸ§©</h2>
                    <p>è§„åˆ™: å°†æ‰“ä¹±çš„å­—æ¯é‡æ–°æ’åˆ—æˆæ­£ç¡®çš„å•è¯</p>
                    <div id="puzzle-scrambled" style="font-size: 2rem; font-weight: bold; margin: 20px 0; letter-spacing: 5px;"></div>
                    <div id="puzzle-input-container" style="margin: 20px 0;">
                        <input type="text" id="puzzle-input" style="font-size: 1.2rem; padding: 10px; width: 200px;">
                        <button id="puzzle-submit" style="padding: 10px 20px; margin-left: 10px;">æäº¤</button>
                    </div>
                    <div id="puzzle-feedback" style="min-height: 40px; font-size: 1.2rem;"></div>
                    <div id="puzzle-progress" style="margin-top: 20px;"></div>
                    <button id="close-puzzle" style="margin-top: 20px; padding: 10px 20px;">è¿”å›</button>
                </div>
            `;
            
            // éšè—ç»ƒä¹ åŒºåŸŸï¼Œæ˜¾ç¤ºæ¸¸æˆåŒºåŸŸ
            document.querySelector('.practice-section').style.display = 'none';
            document.getElementById('examples-container').insertAdjacentHTML('afterend', gameHTML);
            
            // æ¸¸æˆå˜é‡
            let puzzleWords = [...words];
            let currentPuzzleIndex = 0;
            
            // æ‰“ä¹±å•è¯é¡ºåº
            shuffleArray(puzzleWords);
            
            // åˆå§‹åŒ–æ¸¸æˆ
            setupPuzzleWord();
            
            // æäº¤ç­”æ¡ˆäº‹ä»¶
            document.getElementById('puzzle-submit').addEventListener('click', checkPuzzleAnswer);
            document.getElementById('puzzle-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkPuzzleAnswer();
                }
            });
            
            // å…³é—­æ¸¸æˆäº‹ä»¶
            document.getElementById('close-puzzle').addEventListener('click', function() {
                document.getElementById('puzzle-game-container').remove();
                document.querySelector('.practice-section').style.display = 'block';
            });
            
            // è®¾ç½®æ‹¼å›¾å•è¯
            function setupPuzzleWord() {
                const word = puzzleWords[currentPuzzleIndex];
                const scrambled = scrambleWord(word);
                
                document.getElementById('puzzle-scrambled').textContent = scrambled;
                document.getElementById('puzzle-scrambled').dataset.answer = word;
                document.getElementById('puzzle-input').value = '';
                document.getElementById('puzzle-feedback').innerHTML = '';
                document.getElementById('puzzle-progress').innerHTML = `è¿›åº¦: ${currentPuzzleIndex + 1}/${puzzleWords.length}`;
                
                // è‡ªåŠ¨èšç„¦è¾“å…¥æ¡†
                document.getElementById('puzzle-input').focus();
            }
            
            // æ‰“ä¹±å•è¯å­—æ¯
            function scrambleWord(word) {
                const letters = word.split('');
                for (let i = letters.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [letters[i], letters[j]] = [letters[j], letters[i]];
                }
                return letters.join('');
            }
            
            // æ£€æŸ¥æ‹¼å›¾ç­”æ¡ˆ
            function checkPuzzleAnswer() {
                const userInput = document.getElementById('puzzle-input').value.toLowerCase();
                const correctWord = document.getElementById('puzzle-scrambled').dataset.answer.toLowerCase();
                
                if (userInput === correctWord) {
                    // ç­”å¯¹äº†
                    document.getElementById('puzzle-feedback').innerHTML = `<span style="color: green;">æ­£ç¡®! "${correctWord}"</span>`;
                    
                    // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯
                    currentPuzzleIndex++;
                    
                    if (currentPuzzleIndex >= puzzleWords.length) {
                        // æ¸¸æˆé€šå…³
                        setTimeout(() => {
                            document.getElementById('puzzle-feedback').innerHTML = `<span style="color: green; font-weight: bold;">æ­å–œ! ä½ å®Œæˆäº†æ‰€æœ‰å•è¯æ‹¼å›¾! ğŸ‰</span>`;
                            document.getElementById('puzzle-scrambled').textContent = "æ¸¸æˆå®Œæˆ!";
                            document.getElementById('puzzle-input-container').style.display = 'none';
                        }, 1000);
                    } else {
                        // å‡†å¤‡ä¸‹ä¸€ä¸ªå•è¯
                        setTimeout(setupPuzzleWord, 1000);
                    }
                } else {
                    // ç­”é”™äº†
                    document.getElementById('puzzle-feedback').innerHTML = `<span style="color: red;">é”™è¯¯! å†è¯•ä¸€æ¬¡</span>`;
                    document.getElementById('puzzle-input').value = '';
                    document.getElementById('puzzle-input').focus();
                }
            }
        }

        // Hangmanæ¸¸æˆ
        function startHangmanGame() {
            const words = [...allWords[currentPattern]];
            if (words.length === 0) {
                alert("æ­¤ç»„åˆæš‚æ— å•è¯å¯æ¸¸æˆ");
                return;
            }
            
            // åˆ›å»ºæ¸¸æˆç•Œé¢
            const gameHTML = `
                <div id="hangman-game-container" style="text-align: center; padding: 20px;">
                    <h2>Hangmanæ¸¸æˆ ğŸ¯</h2>
                    <p>è§„åˆ™: çŒœå‡ºéšè—çš„å•è¯ï¼Œæ¯æ¬¡çŒœä¸€ä¸ªå­—æ¯</p>
                    <div id="hangman-drawing" style="font-size: 2rem; margin: 20px 0; min-height: 80px;">
                        <pre id="hangman-art"></pre>
                    </div>
                    <div id="hangman-word" style="font-size: 2rem; font-weight: bold; margin: 20px 0; letter-spacing: 10px;"></div>
                    <div id="hangman-letters" style="margin: 20px 0;">
                        ${'abcdefghijklmnopqrstuvwxyz'.split('').map(letter => 
                            `<button class="letter-btn" data-letter="${letter}" style="margin: 5px; padding: 8px 12px; font-size: 1.2rem;">${letter}</button>`
                        ).join('')}
                    </div>
                    <div id="hangman-feedback" style="min-height: 40px; font-size: 1.2rem;"></div>
                    <div id="hangman-progress" style="margin-top: 20px;"></div>
                    <button id="close-hangman" style="margin-top: 20px; padding: 10px 20px;">è¿”å›</button>
                </div>
            `;
            
            // éšè—ç»ƒä¹ åŒºåŸŸï¼Œæ˜¾ç¤ºæ¸¸æˆåŒºåŸŸ
            document.querySelector('.practice-section').style.display = 'none';
            document.getElementById('examples-container').insertAdjacentHTML('afterend', gameHTML);
            
            // æ¸¸æˆå˜é‡
            let hangmanWords = [...words];
            let currentHangmanIndex = 0;
            let currentWord = '';
            let guessedLetters = [];
            let wrongGuesses = 0;
            const maxWrongGuesses = 6;
            
            // æ‰“ä¹±å•è¯é¡ºåº
            shuffleArray(hangmanWords);
            
            // åˆå§‹åŒ–æ¸¸æˆ
            setupHangmanWord();
            
            // å­—æ¯æŒ‰é’®äº‹ä»¶
            document.querySelectorAll('.letter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const letter = this.getAttribute('data-letter');
                    guessLetter(letter);
                    this.disabled = true;
                });
            });
            
            // å…³é—­æ¸¸æˆäº‹ä»¶
            document.getElementById('close-hangman').addEventListener('click', function() {
                document.getElementById('hangman-game-container').remove();
                document.querySelector('.practice-section').style.display = 'block';
            });
            
            // è®¾ç½®Hangmanå•è¯
            function setupHangmanWord() {
                currentWord = hangmanWords[currentHangmanIndex];
                guessedLetters = [];
                wrongGuesses = 0;
                
                updateHangmanDisplay();
                updateHangmanArt();
                
                document.getElementById('hangman-feedback').innerHTML = '';
                document.getElementById('hangman-progress').innerHTML = `è¿›åº¦: ${currentHangmanIndex + 1}/${hangmanWords.length}`;
                
                // å¯ç”¨æ‰€æœ‰å­—æ¯æŒ‰é’®
                document.querySelectorAll('.letter-btn').forEach(btn => {
                    btn.disabled = false;
                });
            }
            
            // æ›´æ–°Hangmanæ˜¾ç¤º
            function updateHangmanDisplay() {
                let display = '';
                for (const letter of currentWord) {
                    if (guessedLetters.includes(letter)) {
                        display += letter + ' ';
                    } else {
                        display += '_ ';
                    }
                }
                document.getElementById('hangman-word').textContent = display;
            }
            
            // æ›´æ–°Hangmanå›¾ç”»
            function updateHangmanArt() {
                const hangmanStages = [
                    `
                     +---+
                     |   |
                         |
                         |
                         |
                         |
                    =========
                    `,
                    `
                     +---+
                     |   |
                     O   |
                         |
                         |
                         |
                    =========
                    `,
                    `
                     +---+
                     |   |
                     O   |
                     |   |
                         |
                         |
                    =========
                    `,
                    `
                     +---+
                     |   |
                     O   |
                    /|   |
                         |
                         |
                    =========
                    `,
                    `
                     +---+
                     |   |
                     O   |
                    /|\\  |
                         |
                         |
                    =========
                    `,
                    `
                     +---+
                     |   |
                     O   |
                    /|\\  |
                    /    |
                         |
                    =========
                    `,
                    `
                     +---+
                     |   |
                     O   |
                    /|\\  |
                    / \\  |
                         |
                    =========
                    `
                ];
                
                document.getElementById('hangman-art').textContent = hangmanStages[wrongGuesses];
            }
            
            // çŒœå­—æ¯
            function guessLetter(letter) {
                if (guessedLetters.includes(letter)) return;
                
                guessedLetters.push(letter);
                
                if (currentWord.includes(letter)) {
                    // çŒœå¯¹äº†
                    updateHangmanDisplay();
                    
                    // æ£€æŸ¥æ˜¯å¦çŒœå‡ºäº†æ•´ä¸ªå•è¯
                    if (isWordGuessed()) {
                        document.getElementById('hangman-feedback').innerHTML = `<span style="color: green;">æ­£ç¡®! "${currentWord}"</span>`;
                        
                        // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯
                        setTimeout(() => {
                            currentHangmanIndex++;
                            if (currentHangmanIndex >= hangmanWords.length) {
                                // æ¸¸æˆé€šå…³
                                document.getElementById('hangman-feedback').innerHTML = `<span style="color: green; font-weight: bold;">æ­å–œ! ä½ å®Œæˆäº†æ‰€æœ‰HangmanæŒ‘æˆ˜! ğŸ‰</span>`;
                                document.getElementById('hangman-word').textContent = "æ¸¸æˆå®Œæˆ!";
                                document.getElementById('hangman-letters').style.display = 'none';
                            } else {
                                setupHangmanWord();
                            }
                        }, 1500);
                    }
                } else {
                    // çŒœé”™äº†
                    wrongGuesses++;
                    updateHangmanArt();
                    
                    if (wrongGuesses >= maxWrongGuesses) {
                        // æ¸¸æˆå¤±è´¥
                        document.getElementById('hangman-feedback').innerHTML = `<span style="color: red;">æ¸¸æˆç»“æŸ! å•è¯æ˜¯ "${currentWord}"</span>`;
                        
                        // æ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆ
                        document.getElementById('hangman-word').textContent = currentWord;
                        
                        // ç¦ç”¨æ‰€æœ‰å­—æ¯æŒ‰é’®
                        document.querySelectorAll('.letter-btn').forEach(btn => {
                            btn.disabled = true;
                        });
                        
                        // é‡æ–°å¼€å§‹å½“å‰å•è¯
                        setTimeout(() => {
                            setupHangmanWord();
                        }, 2000);
                    }
                }
            }
            
            // æ£€æŸ¥æ˜¯å¦çŒœå‡ºäº†æ•´ä¸ªå•è¯
            function isWordGuessed() {
                for (const letter of currentWord) {
                    if (!guessedLetters.includes(letter)) {
                        return false;
                    }
                }
                return true;
            }
        }

        // å•è¯åŒ¹é…æ¸¸æˆ
        function startWordMatchGame() {
            const words = [...allWords[currentPattern]];
            if (words.length === 0) {
                alert("æ­¤ç»„åˆæš‚æ— å•è¯å¯æ¸¸æˆ");
                return;
            }
            
            // åˆ›å»ºæ¸¸æˆç•Œé¢
            const gameHTML = `
                <div id="match-game-container" style="text-align: center; padding: 20px;">
                    <h2>å•è¯åŒ¹é…æ¸¸æˆ ğŸ§ </h2>
                    <p>è§„åˆ™: åŒ¹é…å•è¯å’Œå®ƒä»¬çš„å«ä¹‰</p>
                    <div id="match-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 20px 0;"></div>
                    <div id="match-feedback" style="min-height: 40px; font-size: 1.2rem;"></div>
                    <div id="match-progress" style="margin-top: 20px;"></div>
                    <button id="close-match" style="margin-top: 20px; padding: 10px 20px;">è¿”å›</button>
                </div>
            `;
            
            // éšè—ç»ƒä¹ åŒºåŸŸï¼Œæ˜¾ç¤ºæ¸¸æˆåŒºåŸŸ
            document.querySelector('.practice-section').style.display = 'none';
            document.getElementById('examples-container').insertAdjacentHTML('afterend', gameHTML);
            
            // æ¸¸æˆå˜é‡
            let matchWords = [...allPatterns[currentPattern].words];
            let selectedCard = null;
            let matchedPairs = 0;
            
            // æ‰“ä¹±å•è¯é¡ºåº
            shuffleArray(matchWords);
            
            // åˆå§‹åŒ–æ¸¸æˆ
            setupMatchGame();
            
            // å…³é—­æ¸¸æˆäº‹ä»¶
            document.getElementById('close-match').addEventListener('click', function() {
                document.getElementById('match-game-container').remove();
                document.querySelector('.practice-section').style.display = 'block';
            });
            
            // è®¾ç½®åŒ¹é…æ¸¸æˆ
            function setupMatchGame() {
                const matchGrid = document.getElementById('match-grid');
                matchGrid.innerHTML = '';
                
                // åˆ›å»ºå•è¯å¡ç‰‡å’Œå«ä¹‰å¡ç‰‡
                const allCards = [];
                
                matchWords.forEach((item, index) => {
                    // å•è¯å¡ç‰‡
                    allCards.push({
                        type: 'word',
                        content: item.word,
                        pairId: index
                    });
                    
                    // å«ä¹‰å¡ç‰‡
                    allCards.push({
                        type: 'meaning',
                        content: item.meaning,
                        pairId: index
                    });
                });
                
                // æ‰“ä¹±å¡ç‰‡é¡ºåº
                shuffleArray(allCards);
                
                // åˆ›å»ºå¡ç‰‡å…ƒç´ 
                allCards.forEach(card => {
                    const cardElement = document.createElement('div');
                    cardElement.className = 'match-card';
                    cardElement.dataset.type = card.type;
                    cardElement.dataset.pairId = card.pairId;
                    cardElement.textContent = '?';
                    cardElement.style.cssText = `
                        padding: 15px;
                        background: #4a6cf7;
                        color: white;
                        border-radius: 8px;
                        cursor: pointer;
                        min-height: 60px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 1.1rem;
                    `;
                    
                    cardElement.addEventListener('click', () => flipCard(cardElement, card));
                    matchGrid.appendChild(cardElement);
                });
                
                document.getElementById('match-feedback').innerHTML = '';
                document.getElementById('match-progress').innerHTML = `æ‰¾åˆ°: ${matchedPairs}/${matchWords.length} å¯¹`;
            }
            
            // ç¿»è½¬å¡ç‰‡
            function flipCard(cardElement, card) {
                // å¦‚æœå¡ç‰‡å·²ç»åŒ¹é…æˆ–å·²ç»ç¿»å¼€ï¼Œåˆ™å¿½ç•¥ç‚¹å‡»
                if (cardElement.classList.contains('matched') || cardElement.textContent !== '?') {
                    return;
                }
                
                // æ˜¾ç¤ºå¡ç‰‡å†…å®¹
                cardElement.textContent = card.content;
                cardElement.style.background = '#f0f4ff';
                cardElement.style.color = '#333';
                
                if (!selectedCard) {
                    // ç¬¬ä¸€æ¬¡é€‰æ‹©
                    selectedCard = {element: cardElement, ...card};
                } else {
                    // ç¬¬äºŒæ¬¡é€‰æ‹©ï¼Œæ£€æŸ¥æ˜¯å¦åŒ¹é…
                    if (selectedCard.type !== card.type && selectedCard.pairId === card.pairId) {
                        // åŒ¹é…æˆåŠŸ
                        cardElement.classList.add('matched');
                        selectedCard.element.classList.add('matched');
                        selectedCard = null;
                        matchedPairs++;
                        
                        document.getElementById('match-progress').innerHTML = `æ‰¾åˆ°: ${matchedPairs}/${matchWords.length} å¯¹`;
                        
                        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦å®Œæˆ
                        if (matchedPairs >= matchWords.length) {
                            document.getElementById('match-feedback').innerHTML = `<span style="color: green; font-weight: bold;">æ­å–œ! ä½ å®Œæˆäº†æ‰€æœ‰åŒ¹é…! ğŸ‰</span>`;
                        }
                    } else {
                        // ä¸åŒ¹é…ï¼Œç¿»å›
                        setTimeout(() => {
                            cardElement.textContent = '?';
                            cardElement.style.background = '#4a6cf7';
                            cardElement.style.color = 'white';
                            
                            selectedCard.element.textContent = '?';
                            selectedCard.element.style.background = '#4a6cf7';
                            selectedCard.element.style.color = 'white';
                            
                            selectedCard = null;
                        }, 1000);
                    }
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–æ•™é­åŠŸèƒ½
            const pointer = document.getElementById('teaching-pointer');
            
            // ç§»åŠ¨æ•™é­åˆ°æŒ‡å®šå…ƒç´ 
            function movePointerToElement(element, callback) {
                if (!element) return;
                
                // è·å–å…ƒç´ ä½ç½®
                const rect = element.getBoundingClientRect();
                const containerRect = document.querySelector('.container').getBoundingClientRect();
                
                // è®¡ç®—æ•™é­ä½ç½®
                const x = rect.left + rect.width / 2 - 15; // æ•™é­å®½åº¦30pxï¼Œå±…ä¸­
                const y = rect.top - 40; // æ•™é­é«˜åº¦40pxï¼Œæ”¾åœ¨å­—æ¯ä¸Šæ–¹
                
                // è®¾ç½®æ•™é­ä½ç½®
                pointer.style.left = `${x}px`;
                pointer.style.top = `${y}px`;
                pointer.style.opacity = '1';
                
                // é«˜äº®å½“å‰å­—æ¯
                element.classList.add('pointing');
                
                // å¦‚æœæœ‰å›è°ƒï¼Œåœ¨åŠ¨ç”»ç»“æŸåæ‰§è¡Œ
                if (callback) {
                    setTimeout(callback, 500);
                }
            }
            
            // éšè—æ•™é­
            function hidePointer() {
                pointer.style.opacity = '0';
                
                // ç§»é™¤æ‰€æœ‰å­—æ¯çš„é«˜äº®
                document.querySelectorAll('.letter.pointing').forEach(letter => {
                    letter.classList.remove('pointing');
                });
            }
            
            // ä¿®æ”¹å•è¯æ˜¾ç¤ºå‡½æ•°ï¼Œä½¿å­—æ¯å¯å•ç‹¬å®šä½
            function highlightPattern(word, pattern) {
                // å¤„ç†ç‰¹æ®Šæ¨¡å¼åç§°
                let actualPattern = pattern;
                if (pattern === 'ui-ue') {
                    if (word.includes('ui')) {
                        actualPattern = 'ui';
                    } else if (word.includes('ue')) {
                        actualPattern = 'ue';
                    }
                } else if (pattern === 'ow1' || pattern === 'ow2') {
                    actualPattern = 'ow';
                } else if (pattern === 'y1' || pattern === 'y2') {
                    actualPattern = 'y';
                }
                
                // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ‰¾åˆ°æ¨¡å¼çš„ä½ç½®
                const patternRegex = new RegExp(`(${actualPattern})`, 'gi');
                const match = patternRegex.exec(word);
                
                if (!match) return word;
                
                const patternStart = match.index;
                const patternEnd = patternStart + match[1].length;
                
                // æ„å»ºå¸¦æœ‰å•ç‹¬å­—æ¯spançš„å•è¯
                let result = '';
                for (let i = 0; i < word.length; i++) {
                    if (i === patternStart) {
                        result += `<span class="letter highlight" data-start="${i}" data-end="${patternEnd-1}">`;
                    }
                    
                    result += word[i];
                    
                    if (i === patternEnd - 1) {
                        result += '</span>';
                    }
                }
                
                return result;
            }
            
            // åˆå§‹åŒ–ç»ƒä¹ åŠŸèƒ½å˜é‡
            currentPattern = 'ai';
            practiceWords = [];
            originalOrderWords = [];
            currentPracticeIndex = -1;
            isSpellingMode = false;
            isSecondRound = false;
            
            // è·å–DOMå…ƒç´ 
            const startPracticeBtn = document.getElementById('start-practice');
            const showWordBtn = document.getElementById('show-word');
            const nextWordBtn = document.getElementById('next-word');
            const playWordBtn = document.getElementById('play-word');
            const practiceWordEl = document.getElementById('practice-word');
            const spellingInputContainer = document.getElementById('spelling-input-container');
            const spellingInput = document.getElementById('spelling-input');
            const spellingSubmit = document.getElementById('spelling-submit');
            const feedbackEl = document.getElementById('feedback');
            
            // æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒè¯­éŸ³åˆæˆ
            const speechSupported = 'speechSynthesis' in window;
            
            if (!speechSupported) {
                alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆåŠŸèƒ½ï¼Œéƒ¨åˆ†å‘éŸ³åŠŸèƒ½å¯èƒ½æ— æ³•ä½¿ç”¨ã€‚');
            }
            
            // åˆå§‹åŒ–ä¾§è¾¹æ 
            initSidebar();
            
            // é»˜è®¤æ˜¾ç¤ºç¬¬ä¸€ä¸ªæ¨¡å¼
            showPattern('ai');
            
            // åˆå§‹åŒ–å‘éŸ³æŒ‰é’®
            const patternSoundBtn = document.getElementById('pattern-sound-btn');
            
            // æ’­æ”¾éŸ³æ ‡å‘éŸ³ - ä½¿ç”¨ç¤ºä¾‹å•è¯ä»£æ›¿éŸ³æ ‡
            function playPhoneticSound() {
                if (!speechSupported) {
                    alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆåŠŸèƒ½');
                    return;
                }
                
                // åœæ­¢ä»»ä½•å½“å‰æ­£åœ¨æ’­æ”¾çš„è¯­éŸ³
                window.speechSynthesis.cancel();
                
                // è·å–å½“å‰ç»„åˆçš„ç¤ºä¾‹å•è¯
                const exampleWord = allPatterns[currentPattern].words[0].word;
                
                // åˆ›å»ºè¯­éŸ³å¯¹è±¡
                const utterance = new SpeechSynthesisUtterance(exampleWord);
                
                // è®¾ç½®è‹±è¯­å‘éŸ³
                utterance.lang = 'en-US';
                
                // æ’­æ”¾
                window.speechSynthesis.speak(utterance);
            }
            
            // æ’­æ”¾å•è¯å‘éŸ³
            function playWordSound(word, element) {
                if (!speechSupported) {
                    alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆåŠŸèƒ½');
                    return;
                }
                
                // åœæ­¢ä»»ä½•å½“å‰æ­£åœ¨æ’­æ”¾çš„è¯­éŸ³
                window.speechSynthesis.cancel();
                
                // å¦‚æœæœ‰å…ƒç´ å‚æ•°ï¼ŒæŸ¥æ‰¾å…¶ä¸­çš„å­—æ¯ç»„åˆ
                if (element) {
                    const highlightElement = element.querySelector('.highlight');
                    if (highlightElement) {
                        movePointerToElement(highlightElement, function() {
                            // åˆ›å»ºè¯­éŸ³å¯¹è±¡
                            const utterance = new SpeechSynthesisUtterance(word);
                            
                            // è®¾ç½®è‹±è¯­å‘éŸ³
                            utterance.lang = 'en-US';
                            
                            // æ’­æ”¾ç»“æŸåéšè—æ•™é­
                            utterance.onend = function() {
                                setTimeout(hidePointer, 300);
                            };
                            
                            // æ’­æ”¾
                            window.speechSynthesis.speak(utterance);
                        });
                        return;
                    }
                }
                
                // å¦‚æœæ²¡æœ‰æ‰¾åˆ°é«˜äº®å…ƒç´ ï¼Œç›´æ¥æ’­æ”¾
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                window.speechSynthesis.speak(utterance);
            }
            
            // ä¸ºæ¨¡å¼å‘éŸ³æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬
            patternSoundBtn.addEventListener('click', function() {
                // è·å–ç¬¬ä¸€ä¸ªç¤ºä¾‹å•è¯
                const firstExample = document.querySelector('.example');
                if (firstExample) {
                    const word = firstExample.querySelector('.play-btn').getAttribute('data-word');
                    playWordSound(word, firstExample);
                }
            });
            
            // åˆå§‹åŒ–ä¾§è¾¹æ 
            function initSidebar() {
                const vowelList = document.getElementById('vowel-patterns');
                
                // æ·»åŠ å…ƒéŸ³ç»„åˆ
                patternCategories.vowel.forEach(pattern => {
                    if (allPatterns[pattern]) {
                        const li = document.createElement('li');
                        li.className = 'pattern-item';
                        li.textContent = pattern;
                        li.setAttribute('data-pattern', pattern);
                        li.addEventListener('click', () => showPattern(pattern));
                        vowelList.appendChild(li);
                    }
                });
                
                // æœç´¢åŠŸèƒ½
                const searchInput = document.getElementById('search-input');
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const allItems = document.querySelectorAll('.pattern-item');
                    
                    allItems.forEach(item => {
                        const pattern = item.getAttribute('data-pattern');
                        if (pattern.toLowerCase().includes(searchTerm)) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            }
            
            // é‡ç½®æ‹¼å†™ç»ƒä¹ çŠ¶æ€
            function resetSpellingPractice() {
                isSpellingMode = false;
                isSecondRound = false;
                spellingInputContainer.style.display = 'none';
                spellingInput.value = '';
                feedbackEl.innerHTML = '';
                document.querySelector('.practice-title').textContent = "æ‹¼è¯»ç»ƒä¹ ";
                
                // éšè—æ¸¸æˆæŒ‰é’®
                document.querySelectorAll('.game-btn').forEach(btn => {
                    btn.style.display = 'none';
                });
            }
            
            // æ˜¾ç¤ºæ¨¡å¼å‡½æ•°
            function showPattern(pattern) {
                if (!allPatterns[pattern]) return;
                
                // æ›´æ–°æ´»åŠ¨é¡¹
                const allItems = document.querySelectorAll('.pattern-item');
                allItems.forEach(item => {
                    if (item.getAttribute('data-pattern') === pattern) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });
                
                // æ›´æ–°æ¨¡å¼æ ‡é¢˜
                document.getElementById('current-pattern').textContent = pattern;
                
                // æ›´æ–°å‘éŸ³å’Œè§„åˆ™
                document.getElementById('current-sound').textContent = allPatterns[pattern].sound;
                document.getElementById('current-rule').textContent = allPatterns[pattern].rule;
                
                // æ›´æ–°ç¤ºä¾‹å•è¯
                const examplesContainer = document.getElementById('examples-container');
                examplesContainer.innerHTML = '';
                
                allPatterns[pattern].words.forEach(item => {
                    const exampleDiv = document.createElement('div');
                    exampleDiv.className = 'example';
                    
                    const wordDiv = document.createElement('div');
                    wordDiv.className = 'word';
                    
                    // ä½¿ç”¨å®¹å™¨åŒ…è£¹å•è¯ï¼Œç¡®ä¿æ­£å¸¸æ˜¾ç¤º
                    const wordContainer = document.createElement('span');
                    wordContainer.className = 'word-container';
                    wordContainer.innerHTML = highlightPattern(item.word, pattern);
                    
                    wordDiv.appendChild(wordContainer);
                    
                    const playButton = document.createElement('button');
                    playButton.className = 'play-btn';
                    playButton.setAttribute('data-word', item.word);
                    playButton.innerHTML = 'ğŸ”Š';
                    playButton.addEventListener('click', function() {
                        const word = this.getAttribute('data-word');
                        playWordSound(word, exampleDiv);
                    });
                    
                    wordDiv.appendChild(playButton);
                    
                    const meaningDiv = document.createElement('div');
                    meaningDiv.className = 'meaning';
                    meaningDiv.textContent = item.meaning;
                    
                    exampleDiv.appendChild(wordDiv);
                    exampleDiv.appendChild(meaningDiv);
                    examplesContainer.appendChild(exampleDiv);
                });
                
                // æ›´æ–°å½“å‰ç»ƒä¹ çš„å•è¯ç»„
                currentPattern = pattern;
                practiceWords = [...allWords[pattern]];
                originalOrderWords = [...allWords[pattern]];
                currentPracticeIndex = -1;
                
                // é‡ç½®æ‹¼å†™ç»ƒä¹ çŠ¶æ€
                resetSpellingPractice();
                practiceWordEl.textContent = "ç‚¹å‡»\"å¼€å§‹ç»ƒä¹ \"æŒ‰é’®å¼€å§‹";
            }
            
            // å¼€å§‹ç»ƒä¹ 
            startPracticeBtn.addEventListener('click', function() {
                if (!allWords[currentPattern] || allWords[currentPattern].length === 0) {
                    practiceWordEl.textContent = "æ­¤ç»„åˆæš‚æ— å•è¯å¯ç»ƒä¹ ";
                    return;
                }
                
                // é‡ç½®ä¸ºç¬¬ä¸€è½®ï¼ˆé¡ºåºï¼‰ç»ƒä¹ 
                isSecondRound = false;
                originalOrderWords = [...allWords[currentPattern]];
                practiceWords = [...originalOrderWords];
                currentPracticeIndex = 0;
                isSpellingMode = true;
                
                // æ˜¾ç¤ºè¾“å…¥æ¡†ï¼Œéšè—å•è¯æ˜¾ç¤º
                spellingInputContainer.style.display = 'flex';
                practiceWordEl.textContent = "_".repeat(practiceWords[0].length);
                practiceWordEl.setAttribute('data-word', practiceWords[0]);
                
                // æ¸…ç©ºåé¦ˆ
                feedbackEl.innerHTML = '';
                
                // æ›´æ–°ç»ƒä¹ æ ‡é¢˜
                document.querySelector('.practice-title').textContent = "æ‹¼è¯»ç»ƒä¹  - ç¬¬ä¸€è½®ï¼ˆé¡ºåºï¼‰";
                
                // éšè—æ¸¸æˆæŒ‰é’®
                document.querySelectorAll('.game-btn').forEach(btn => {
                    btn.style.display = 'none';
                });
                
                // èšç„¦è¾“å…¥æ¡†
                spellingInput.focus();
                
                // æ’­æ”¾å½“å‰å•è¯å‘éŸ³
                playWordSound(practiceWords[0]);
            });
            
            // æäº¤æ‹¼å†™
            spellingSubmit.addEventListener('click', checkSpelling);
            spellingInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkSpelling();
                }
            });
            
            function checkSpelling() {
                if (!isSpellingMode || currentPracticeIndex < 0 || currentPracticeIndex >= practiceWords.length) return;
                
                const userInput = spellingInput.value.trim().toLowerCase();
                const correctWord = practiceWords[currentPracticeIndex].toLowerCase();
                
                if (userInput === correctWord) {
                    // æ‹¼å†™æ­£ç¡®
                    feedbackEl.innerHTML = '<span class="correct">âœ” æ­£ç¡®!</span>';
                    setTimeout(() => {
                        // æ¸…ç©ºè¾“å…¥å’Œåé¦ˆ
                        spellingInput.value = '';
                        feedbackEl.innerHTML = '';
                        
                        // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯
                        currentPracticeIndex++;
                        if (currentPracticeIndex >= practiceWords.length) {
                            // å½“å‰è½®æ¬¡æ‰€æœ‰å•è¯éƒ½ç»ƒä¹ å®Œæ¯•
                            if (!isSecondRound) {
                                // ç¬¬ä¸€è½®å®Œæˆï¼Œå¼€å§‹ç¬¬äºŒè½®ï¼ˆä¹±åºï¼‰ç»ƒä¹ 
                                startSecondRound();
                            } else {
                                // ç¬¬äºŒè½®ä¹Ÿå®Œæˆï¼Œæ‰€æœ‰ç»ƒä¹ ç»“æŸ
                                isSpellingMode = false;
                                spellingInputContainer.style.display = 'none';
                                practiceWordEl.textContent = "æ­å–œï¼æ‰€æœ‰å•è¯éƒ½æ‹¼å†™æ­£ç¡®ï¼";
                                document.querySelector('.practice-title').textContent = "æ‹¼è¯»ç»ƒä¹  - å®Œæˆ";
                                
                                // æ˜¾ç¤ºæ¸¸æˆæŒ‰é’®
                                document.querySelectorAll('.game-btn').forEach(btn => {
                                    btn.style.display = 'inline-block';
                                });
                                return;
                            }
                        }
                        
                        // æ˜¾ç¤ºä¸‹ä¸€ä¸ªå•è¯çš„ä¸‹åˆ’çº¿
                        practiceWordEl.textContent = "_".repeat(practiceWords[currentPracticeIndex].length);
                        practiceWordEl.setAttribute('data-word', practiceWords[currentPracticeIndex]);
                        
                        // æ’­æ”¾å‘éŸ³
                        playWordSound(practiceWords[currentPracticeIndex]);
                        
                        // èšç„¦è¾“å…¥æ¡†
                        spellingInput.focus();
                    }, 1000);
                } else {
                    // æ‹¼å†™é”™è¯¯
                    feedbackEl.innerHTML = `
                        <span class="incorrect">âœ— é”™è¯¯</span>
                        <div class="correct-word">æ­£ç¡®æ‹¼å†™: ${practiceWords[currentPracticeIndex]}</div>
                    `;
                    
                    // æ¸…ç©ºè¾“å…¥æ¡†å¹¶é‡æ–°èšç„¦
                    spellingInput.value = '';
                    spellingInput.focus();
                }
            }
            
            // å¼€å§‹ç¬¬äºŒè½®ï¼ˆä¹±åºï¼‰ç»ƒä¹ 
            function startSecondRound() {
                isSecondRound = true;
                practiceWords = [...originalOrderWords];
                shuffleArray(practiceWords); // æ‰“ä¹±é¡ºåº
                currentPracticeIndex = 0;
                
                // æ›´æ–°ç»ƒä¹ æ ‡é¢˜
                document.querySelector('.practice-title').textContent = "æ‹¼è¯»ç»ƒä¹  - ç¬¬äºŒè½®ï¼ˆä¹±åºï¼‰";
                
                // æ˜¾ç¤ºä¸‹ä¸€ä¸ªå•è¯çš„ä¸‹åˆ’çº¿
                practiceWordEl.textContent = "_".repeat(practiceWords[0].length);
                practiceWordEl.setAttribute('data-word', practiceWords[0]);
                
                // æ’­æ”¾å‘éŸ³
                playWordSound(practiceWords[0]);
                
                // èšç„¦è¾“å…¥æ¡†
                spellingInput.focus();
            }
            
            // æ˜¾ç¤ºå•è¯
            showWordBtn.addEventListener('click', function() {
                if (currentPracticeIndex >= 0 && currentPracticeIndex < practiceWords.length) {
                    const word = practiceWords[currentPracticeIndex];
                    const wordContainer = document.createElement('span');
                    wordContainer.className = 'word-container';
                    wordContainer.innerHTML = highlightPattern(word, currentPattern);
                    practiceWordEl.innerHTML = '';
                    practiceWordEl.appendChild(wordContainer);
                }
            });
            
            // ä¸‹ä¸€ä¸ªå•è¯
            nextWordBtn.addEventListener('click', function() {
                if (practiceWords.length === 0) return;
                
                // å¦‚æœæ­£åœ¨æ‹¼å†™æ¨¡å¼ï¼Œå…ˆé€€å‡º
                if (isSpellingMode) {
                    isSpellingMode = false;
                    spellingInputContainer.style.display = 'none';
                    feedbackEl.innerHTML = '';
                }
                
                currentPracticeIndex++;
                if (currentPracticeIndex >= practiceWords.length) {
                    currentPracticeIndex = 0;
                }
                
                practiceWordEl.textContent = "_".repeat(practiceWords[currentPracticeIndex].length);
                practiceWordEl.setAttribute('data-word', practiceWords[currentPracticeIndex]);
            });
            
            // æ’­æ”¾å•è¯å‘éŸ³
            playWordBtn.addEventListener('click', function() {
                if (currentPracticeIndex >= 0 && currentPracticeIndex < practiceWords.length) {
                    const word = practiceWords[currentPracticeIndex];
                    playWordSound(word);
                }
            });
            
            // æ·»åŠ æ¸¸æˆæŒ‰é’®
            function addGameButtons() {
                const practiceButtons = document.querySelector('.practice-buttons');
                
                // å°çŒªåƒè‹¹æœæ¸¸æˆæŒ‰é’®
                const pigGameBtn = document.createElement('button');
                pigGameBtn.className = 'btn game-btn';
                pigGameBtn.id = 'pig-game-btn';
                pigGameBtn.textContent = 'ğŸ· å°çŒªåƒè‹¹æœ';
                pigGameBtn.style.display = 'none';
                practiceButtons.appendChild(pigGameBtn);
                
                // å•è¯æ‹¼å›¾æ¸¸æˆæŒ‰é’®
                const puzzleBtn = document.createElement('button');
                puzzleBtn.className = 'btn game-btn';
                puzzleBtn.id = 'word-puzzle-btn';
                puzzleBtn.textContent = 'ğŸ§© å•è¯æ‹¼å›¾';
                puzzleBtn.style.display = 'none';
                practiceButtons.appendChild(puzzleBtn);
                
                // Hangmanæ¸¸æˆæŒ‰é’®
                const hangmanBtn = document.createElement('button');
                hangmanBtn.className = 'btn game-btn';
                hangmanBtn.id = 'hangman-btn';
                hangmanBtn.textContent = 'ğŸ¯ Hangman';
                hangmanBtn.style.display = 'none';
                practiceButtons.appendChild(hangmanBtn);
                
                // å•è¯åŒ¹é…æ¸¸æˆæŒ‰é’®
                const matchBtn = document.createElement('button');
                matchBtn.className = 'btn game-btn';
                matchBtn.id = 'word-match-btn';
                matchBtn.textContent = 'ğŸ§  å•è¯åŒ¹é…';
                matchBtn.style.display = 'none';
                practiceButtons.appendChild(matchBtn);
                
                // æ·»åŠ æ¸¸æˆæŒ‰é’®äº‹ä»¶
                pigGameBtn.addEventListener('click', startPigEatAppleGame);
                puzzleBtn.addEventListener('click', startWordPuzzleGame);
                hangmanBtn.addEventListener('click', startHangmanGame);
                matchBtn.addEventListener('click', startWordMatchGame);
            }
            
            // é¡µé¢åŠ è½½å®Œæˆåæ·»åŠ æ¸¸æˆæŒ‰é’®
            setTimeout(addGameButtons, 500);
        });
    </script>
</body>
</html>